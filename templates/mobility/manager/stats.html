{% extends "layouts/base_dashboard.html" %}
{% block title %}Dashboard Responsable Mobilite{% endblock %}
{% block topbar_subtitle %}Espace Responsable Mobilite{% endblock %}
{% block sidebar_content %}
  {% include "layouts/sidebar_manager.html" %}
{% endblock %}
{% block sidebar_mobile %}
  {% include "layouts/sidebar_manager.html" %}
{% endblock %}
{% block content %}
<div class="role-hero">
  <h2>Dashboard Responsable</h2>
  <p>Vue strategique du processus</p>
</div>

<div class="role-kpi-grid mb-3">
  <div class="role-kpi">
    <div class="role-kpi-icon"><i class="bi bi-people"></i></div>
    <div>
      <div class="role-kpi-title">Etudiants</div>
      <div class="role-kpi-value">{{ kpi.students_total|default:"--" }}</div>
    </div>
  </div>
  <div class="role-kpi">
    <div class="role-kpi-icon"><i class="bi bi-patch-check"></i></div>
    <div>
      <div class="role-kpi-title">Eligibles</div>
      <div class="role-kpi-value">{{ kpi.students_eligible|default:"--" }}</div>
    </div>
  </div>
  <div class="role-kpi">
    <div class="role-kpi-icon"><i class="bi bi-clipboard-data"></i></div>
    <div>
      <div class="role-kpi-title">Selectionnes</div>
      <div class="role-kpi-value">{{ kpi.selected|default:"--" }}</div>
    </div>
  </div>
  <div class="role-kpi">
    <div class="role-kpi-icon"><i class="bi bi-check2-circle"></i></div>
    <div>
      <div class="role-kpi-title">Affectes</div>
      <div class="role-kpi-value">{{ kpi.assigned|default:"--" }}</div>
    </div>
  </div>
</div>

<div class="role-kpi-grid mb-3">
  <div class="role-kpi">
    <div class="role-kpi-icon"><i class="bi bi-folder-check"></i></div>
    <div>
      <div class="role-kpi-title">Docs valides</div>
      <div class="role-kpi-value">{{ kpi.docs_ok|default:"--" }}</div>
    </div>
  </div>
</div>

<div class="role-card">
  <div class="role-card-header">
    <h5 class="mb-0">Statistiques rapides</h5>
  </div>
  <div class="row g-3">
    <div class="col-md-6">
      <h6 class="fw-semibold">Top filieres</h6>
      <ul class="mb-0">
        {% for row in by_filiere %}
          <li>{{ row.filiere__nom }} : <b>{{ row.n }}</b></li>
        {% empty %}
          <li class="text-muted">Aucune donnee.</li>
        {% endfor %}
      </ul>
    </div>
    <div class="col-md-6">
      <h6 class="fw-semibold">Top partenaires</h6>
      <ul class="mb-0">
        {% for row in by_partner %}
          <li>{{ row.place__partenaire__nom }} : <b>{{ row.n }}</b></li>
        {% empty %}
          <li class="text-muted">Aucune donnee.</li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>

<div class="role-card">
  <div class="role-card-header">
    <h5 class="mb-0">Graphiques (placeholder)</h5>
  </div>
  <div class="empty-state">
    <div class="empty-icon"><i class="bi bi-bar-chart"></i></div>
    <div class="empty-title">Graphiques bientot</div>
    <div class="empty-text">Zone reservee pour Chart.js (taux d'affectation, documents OK).</div>
  </div>
</div>
{% endblock %}
